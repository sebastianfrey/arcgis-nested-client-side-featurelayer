const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-HVMkvd8u.js","./index-CiswRgqD.css","./previewWebStyleSymbol-bLnihimz.js","./utils-BKe1fz5Q.js","./utils-D-pgIN4N.js","./webStyleSymbolUtils-C7Qx44Mv.js","./devEnvironmentUtils-Blrp8lZ5.js","./previewSymbol2D-Bi8aa2I6.js","./fontUtils-CKcT0XmG.js","./previewCIMSymbol-CEILLpzW.js","./CIMSymbolHelper-MN7TYYzM.js","./BidiEngine-BwB1Df7c.js","./OptimizedGeometry-DLPswkPy.js","./GeometryUtils-BHXOVqq4.js","./enums-BRqP_wXA.js","./definitions-ChNTV7Fi.js","./Rect-CUzevAry.js","./BoundingBox-CUCvmTdp.js","./CIMResourceManager-D_prlh4O.js","./imageUtils-L2jXPZN9.js"])))=>i.map(i=>d[i]);
import{jK as A,kM as Re,kN as _e,aQ as je,kO as Oe,au as E,d9 as Ne,dA as De,dz as Ue,aH as S,kP as Pe,bE as Te,kQ as Be,eN as Fe,aB as J,aP as ee,kR as se,kS as D,kT as Ge,kU as te,kV as We,kW as qe,kX as Qe,kY as ae,cb as He,ax as Ke,e as K,kZ as ge,fq as Le,dC as Z,ad as Xe,k_ as Ye,k$ as Je,dB as et}from"./index-HVMkvd8u.js";import{h as _,g as tt,I as ve,b as at,f as nt,a as lt,w as we,p as ot,y as st,N as it,c as Q,R as rt,D as ct}from"./utils-BKe1fz5Q.js";import{Z as ut,N as ht}from"./utils-D-pgIN4N.js";import{resolveWebStyleSymbol as pt}from"./webStyleSymbolUtils-C7Qx44Mv.js";function $a({level:e,class:t,...a},n){const l=be(e);return A(`h${l}`,{...a,"aria-level":String(l),class:Re(_e.heading,t),role:"heading"},n)}function be(e){return je(Math.ceil(e),1,6)}function Sa(e,t=1){return be(e+t)}const mt=/^-?(\d+)(\.(\d+))?$/i;function ft(e,t){return e-t}function dt(e,t){let a,n;return a=Number(e.toFixed(t)),a<e?n=a+1/10**t:(n=a,a-=1/10**t),a=Number(a.toFixed(t)),n=Number(n.toFixed(t)),[a,n]}function yt(e,t,a,n,l){const o=gt(e,t,a,n),s=o.previous==null||o.previous<=l,i=o.next==null||o.next<=l;return s&&i||o.previous+o.next<=2*l}function xe(e){const t=String(e),a=t.match(mt);if(a&&a[1])return{integer:a[1].split("").length,fractional:a[3]?a[3].split("").length:0};if(t.toLowerCase().includes("e")){const n=t.split("e"),l=n[0],o=n[1];if(l&&o){const s=Number(l);let i=Number(o);const r=i>0;r||(i=Math.abs(i));const c=xe(s);return r?(c.integer+=i,i>c.fractional?c.fractional=0:c.fractional-=i):(c.fractional+=i,i>c.integer?c.integer=1:c.integer-=i),c}}return{integer:0,fractional:0}}function gt(e,t,a,n){const l={previous:null,next:null};if(a!=null){const o=e-a,s=t-a-o;l.previous=Math.floor(Math.abs(100*s/o))}if(n!=null){const o=n-e,s=n-t-o;l.next=Math.floor(Math.abs(100*s/o))}return l}function Ca(e,t={}){const a=e.slice(0),{tolerance:n=2,strictBounds:l=!1,indexes:o=a.map((s,i)=>i)}=t;o.sort(ft);for(let s=0;s<o.length;s++){const i=o[s],r=a[i],c=i===0?null:a[i-1],m=i===a.length-1?null:a[i+1],f=xe(r).fractional;if(f){let p,h=0,u=!1;for(;h<=f&&!u;){const d=dt(r,h);p=l&&s===0?d[1]:d[0],u=yt(r,p,c,m,n),h++}u&&(a[i]=p)}}return a}const Lt={maximumFractionDigits:20};function vt(e){return Oe(e,Lt)}const wt="<",bt=">";function xt(e,t,a,n){let l="";return t===0?l=`${wt} `:t===a&&(l=`${bt} `),l+(n?ht(e,n):vt(e))}const za=["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwcdIkqhiWn5fHwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6JrzFUAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwaeIkqhiWl5/HwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6sKxboAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwadJEqhiWl5fPwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu75+IUcAAAAASUVORK5CYII="];async function At(e){if(!("visualVariables"in e)||!e.visualVariables)return null;const t=e.visualVariables.find(s=>s.type==="color");if(!t)return null;let a=null,n=null;if(t.stops){if(t.stops.length===1)return t.stops[0].color;a=t.stops[0].value,n=t.stops[t.stops.length-1].value}const l=a!=null&&n!=null?a+(n-a)/2:0,{getColor:o}=await E(async()=>{const{getColor:s}=await import("./index-HVMkvd8u.js").then(i=>i.of);return{getColor:s}},__vite__mapDeps([0,1]),import.meta.url);return o(t,l)??null}async function Za(e,t){const a=e.trailCap,n=e.trailWidth||1,l=t||await At(e)||e.color;return new Ne({cap:a,color:l,width:n})}function Ia(e){return e!=null&&typeof e=="object"&&"min"in e&&"max"in e}function kt(e,t){var a,n;if(!t.field)return null;if("featureReduction"in e)switch((a=e.featureReduction)==null?void 0:a.type){case"cluster":case"binning":{const l=e.featureReduction.fields.find(({name:o})=>o.toLowerCase()===t.field.toLowerCase());return l&&"getField"in e?e.getField(l.onStatisticField):null}}return"getField"in e?(n=e.getField)==null?void 0:n.call(e,t.field):null}function Mt(e,t){var n,l,o;const a="popupTemplate"in e?(n=e.popupTemplate)==null?void 0:n.fieldInfos:null;if(a!=null&&a.length&&t)return(o=(l=a.find(s=>{var i;return((i=s.fieldName)==null?void 0:i.toLowerCase())===t.toLowerCase()}))==null?void 0:l.format)==null?void 0:o.dateFormat}function Ea(e,t,a){var o,s,i,r;const n=kt(e,t);if(!n||!ut(n)&&!De(n))return null;let l=Mt(e,n.name);if(!l&&n.type==="date"){let c=0,m=0;t.stops?(c=((s=(o=t.stops)==null?void 0:o.at(0))==null?void 0:s.value)??c,m=((r=(i=t.stops)==null?void 0:i.at(-1))==null?void 0:r.value)??m):"minDataValue"in t&&"maxDataValue"in t&&(c=t.minDataValue??c,m=t.maxDataValue??m),l=m-c>2*Ue.days?"short-date":"short-date-short-time"}return{fieldType:n.type,format:l,timeZoneOptions:{layerTimeZone:"preferredTimeZone"in e?e.preferredTimeZone:null,viewTimeZone:a,datesInUnknownTimezone:"datesInUnknownTimezone"in e&&e.datesInUnknownTimezone}}}const $t=new S([64,64,64]);function Ae(e,t){const a=[],n=e.length-1;return e.length===5?a.push(0,2,4):a.push(0,n),e.map((l,o)=>a.includes(o)?xt(l,o,n,t):null)}async function St(e,t,a){let n=!1,l=[],o=[];if(e.stops){const c=e.stops;l=c.map(m=>m.value),n=c.some(m=>!!m.label),n&&(o=c.map(m=>m.label))}const s=l[0],i=l[l.length-1];if(s==null&&i==null)return null;const r=n?null:Ae(l,a);return(await Promise.all(l.map(async(c,m)=>({value:c,color:e.type==="opacity"?await Ct(c,e,t):(await E(async()=>{const{getColor:f}=await import("./index-HVMkvd8u.js").then(p=>p.of);return{getColor:f}},__vite__mapDeps([0,1]),import.meta.url)).getColor(e,c),label:n?o[m]:(r==null?void 0:r[m])??""})))).reverse()}async function Ct(e,t,a){const n=new S(a??$t),l=(await E(async()=>{const{getOpacity:o}=await import("./index-HVMkvd8u.js").then(s=>s.of);return{getOpacity:o}},__vite__mapDeps([0,1]),import.meta.url)).getOpacity(t,e);return l!=null&&(n.a=l),n}function Va(e){let t=!1,a=[],n=[];a=e.map(i=>i.value),t=e.some(i=>!!i.label),t&&(n=e.map(i=>i.label??""));const l=a[0],o=a[a.length-1];if(l==null&&o==null)return null;const s=t?null:Ae(a);return a.map((i,r)=>({value:i,color:zt(i,e),label:t?n[r]:(s==null?void 0:s[r])??""})).reverse()}function zt(e,t){const{startIndex:a,endIndex:n,weight:l}=Zt(e,t);if(a===n)return t[a].color;const o=S.blendColors(t[a].color,t[n].color,l);return new S(o)}function Zt(e,t){let a=0,n=t.length-1;return t.some((l,o)=>e<l.value?(n=o,!0):(a=o,!1)),{startIndex:a,endIndex:n,weight:(e-t[a].value)/(t[n].value-t[a].value)}}function Ra(e,t){let a=[];if(e&&e.type==="multipart")e.colorRamps.reverse().forEach((n,l)=>{l===0?a.push({value:t.max,color:new S(n.toColor),label:"high"}):a.push({value:null,color:new S(n.toColor),label:""}),l===e.colorRamps.length-1?a.push({value:t.min,color:new S(n.fromColor),label:"low"}):a.push({value:null,color:new S(n.fromColor),label:""})});else{let n,l;e&&e.type==="algorithmic"?(n=e.fromColor,l=e.toColor):(n=[0,0,0,1],l=[255,255,255,1]),a=[{value:t.max,color:new S(l),label:"high"},{value:t.min,color:new S(n),label:"low"}]}return a}function It(e){if(!e.colorStops)return[];const t=[...e.colorStops].filter(n=>{var l;return((l=n.color)==null?void 0:l.a)>0});let a=t.length-1;if(t&&t[0]){const n=t[a];n&&n.ratio!==1&&(t.push(new Pe({ratio:1,color:n.color})),a++)}return t.map((n,l)=>{var s,i;let o="";return l===0?o=((s=e.legendOptions)==null?void 0:s.minLabel)||"low":l===a&&(o=((i=e.legendOptions)==null?void 0:i.maxLabel)||"high"),{color:n.color,label:o,ratio:n.ratio}}).reverse()}Te("short-date");async function z(e,t,a){Fe(e,t,()=>[]).push(...a)}async function _a(e){var a,n;const t=new Map;if(!e)return t;if("visualVariables"in e&&e.visualVariables){const l=e.visualVariables.filter(o=>o.type==="color");for(const o of l){const s=(await St(o)??[]).map(i=>i.color);await z(t,o.field||o.valueExpression,s)}}if(e.type==="heatmap"){const l=It(e).map(o=>o.color);await z(t,e.field||e.valueExpression,l)}else if(e.type==="pie-chart"){for(const l of e.attributes)await z(t,l.field||l.valueExpression,[l.color]);await z(t,"default",[(a=e==null?void 0:e.othersCategory)==null?void 0:a.color,_(e.backgroundFillSymbol,null)])}else if(e.type==="dot-density"){for(const l of e.attributes)await z(t,l.field||l.valueExpression,[l.color]);await z(t,"default",[e.backgroundColor])}else if(e.type==="unique-value")if(((n=e.authoringInfo)==null?void 0:n.type)==="predominance")for(const l of e.uniqueValueInfos??[])await z(t,l.value.toString(),[_(l.symbol,null)]);else{const l=(e.uniqueValueInfos??[]).map(c=>_(c.symbol,null)),{field:o,field2:s,field3:i,valueExpression:r}=e;(o||r)&&await z(t,o||r,l),s&&await z(t,s,l),i&&await z(t,i,l)}else if(e.type==="class-breaks"){const l=e.classBreakInfos.map(i=>_(i.symbol,null)),{field:o,valueExpression:s}=e;await z(t,o??s,l)}else e.type==="simple"&&await z(t,"default",[_(e.symbol,null)]);return"defaultSymbol"in e&&e.defaultSymbol&&await z(t,"default",[_(e.defaultSymbol,null)]),t.forEach((l,o)=>{const s=Be(l.filter(Boolean),(i,r)=>JSON.stringify(i)===JSON.stringify(r));t.set(o,s)}),t}var $;(function(e){e[e.size=22]="size",e[e.lineWidth=50]="lineWidth",e[e.maxSize=120]="maxSize",e[e.maxOutlineSize=80]="maxOutlineSize",e[e.tallSymbolWidth=20]="tallSymbolWidth"})($||($={}));const U={fill:[{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"}],squareFill:[{type:"path",path:"M -10,-10 L 10,-10 L 10,10 L -10,10 L -10,-10 Z"}],meshSymbol3DFill:[{type:"path",path:"M -10,-8 L 6,0 L 6,6 L -10,6 L -10,-8 Z"},{type:"path",path:"M -10,-8 L -7,-10 L 9,-2 L 6,0 L -10,-8 Z"},{type:"path",path:"M 6,0 L 9,-2 L 9,4 L 6,6 L 6,0 Z"}],pathSymbol3DLayer:[{type:"path",path:"M 3,12 L 12,0 L 11,-2 L -4,5 L -1,5 L 1,7 L 3,10 L 3,12 Z"},{type:"circle",cx:-2,cy:10,r:5}],extrudeSymbol3DLayer:[{type:"path",path:"M -7,-5 L -2,0 L -2,7 L -7,3 L -7,-5 Z"},{type:"path",path:"M -2,0 L -2,7 L 10,-3 L 10,-10 L -2,0 Z"},{type:"path",path:"M -7,-5 L -2,0 L 10,-10 L -2,-10 L -7,-5 Z"}],cone:[{type:"path",path:"M 0,-10 L -8,5 L -4,6.5 L 0,7 L 4,6.5 L 8,5 Z"}],tallCone:[{type:"path",path:"M 0,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 0,-9 Z"}],invertedCone:[{type:"path",path:"M 0,7 L -8,-8 L 8,-8 Z"},{type:"path",path:"M -8,-8 L -4,-9.5 L 0,-10 L 4,-9.5 L 8,-8 L 4,-6.5 L 0,-6 L -4,-6.5 Z"}],cube:[{type:"path",path:"M -10,-7 L 0,-12 L 10,-7 L 0,-2 L -10,-7 Z"},{type:"path",path:"M -10,-7 L 0,-2 L 0,12 L -10,7 L -10,-7 Z"},{type:"path",path:"M 0,-2 L 10,-7 L 10,7 L 0,12 L 0,-2 Z"}],tallCube:[{type:"path",path:"M -3.5,-8.5 L 0,-9.5 L 3.5,-8.5 L 0,-7.5 L -3.5,-8.5 Z"},{type:"path",path:"M -3.5,-8.5 L 0,-7.5 L 0,9 L -3.5,8 L -3.5,-8.5 Z"},{type:"path",path:"M 0,-7.5 L 3.5,-8.5 L 3.5,8 L 0,9 L 0,-7.5 Z"}],cylinder:[{type:"path",path:"M -8,-9 L -8,7 L -4,8.5 L 0,9 L 4,8.5 L 8,7 L 8,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:8,ry:2}],tallCylinder:[{type:"path",path:"M -3.5,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 3.5,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:3.5,ry:1}],diamond:[{type:"path",path:"M 0,-10 L 10,-1 L -1,1 L 0,-10 Z"},{type:"path",path:"M 0,-10 L -1,1 L -8,-1 L 0,-10 Z"},{type:"path",path:"M -1,1 L 0,10 L -8,-1 L -1,1 Z"},{type:"path",path:"M -1,0 L 0,10 L 10,-1 L -1,1 Z"}],tetrahedron:[{type:"path",path:"M 0,-10 L 10,7 L 0,0 L 0,-10 Z"},{type:"path",path:"M 0,-10 L 0,0 L -8,7 L 0,-10 Z"},{type:"path",path:"M 10,7 L 0,0 L -8,7 L 10,7 Z"}]};function Et(e,t,a){const n=$.size;let l=n,o=n;e<1?l*=.75:e>1&&(o*=1.25);const s=0,i=0;let r=n,c=n;return t&&a&&(l=o=r=c=0),[{type:"path",path:[{command:"M",values:[r,s]},{command:"L",values:[a?r:.875*r,s]},{command:"L",values:[a?l-.5*r:i,o-.5*c]},{command:"L",values:[l-.5*r,o-.5*c]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[r,s]},{command:"L",values:[r,t?s:.125*c]},{command:"L",values:[l-.5*r,t?o-.5*c:c]},{command:"L",values:[l-.5*r,o-.5*c]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[l-.5*r,o-.5*c]},{command:"L",values:[a?l-.5*r:i,o-.5*c]},{command:"L",values:[a?l-.5*r:i,t?o-.5*c:c]},{command:"L",values:[l-.5*r,t?o-.5*c:c]},{command:"Z",values:[]}]}]}function Vt(e){const t=$.size,a=.5*e,n=0,l=0;return[{type:"path",path:[{command:"M",values:[l,.7*t*.5]},{command:"L",values:[.3*t,.7*t]},{command:"L",values:[.3*t,.7*t+a]},{command:"L",values:[l,.7*t+a-.7*t*.5]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*t,.7*t]},{command:"L",values:[.3*t,.7*t+a]},{command:"L",values:[t,a]},{command:"L",values:[t,n]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*t,n]},{command:"L",values:[t,n]},{command:"L",values:[.3*t,.7*t]},{command:"L",values:[l,.7*t*.5]},{command:"Z",values:[]}]}]}function Rt(){return[{type:"path",path:"M80,80.2v-27c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4C8.3,59.3,5.7,58,3.9,56c-1.1-1.2-2.4-2.1-3.9-2.8v27"},{type:"path",path:"M11,59.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8v-24c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-1.1-1.2-2.4-2.1-3.9-2.8v24c1.5,0.7,2.8,1.6,3.9,2.8C5.7,58,8.3,59.3,11,59.4z"},{type:"path",path:"M11,35.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8V3.6c-1.5,0.7-2.8,1.6-3.9,2.8c-2.2,2.1-4.6,3.4-7.1,3.4s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6S42.5,9.9,40,9.9s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.5,0-5-1.3-7.1-3.4C2.8,5.3,1.4,4.3,0,3.6v25.6c1.5,0.7,2.8,1.6,3.9,2.8C5.7,34.1,8.3,35.3,11,35.4z"}]}function _t(e,t){let a=t?$.tallSymbolWidth:e;const n=e,l=t?4:6;a<=$.size?a-=.5*l:a-=l;const o=0,s=0,i=t?.35*a:.5*a;return[{type:"path",path:[{command:"M",values:[.5*a,o]},{command:"L",values:[a,.5*i]},{command:"L",values:[.5*a,i]},{command:"L",values:[s,.5*i]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[o,.5*i]},{command:"L",values:[.5*a,i]},{command:"L",values:[.5*a,n]},{command:"L",values:[s,n-.5*i]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.5*a,i]},{command:"L",values:[.5*a,n]},{command:"L",values:[a,n-.5*i]},{command:"L",values:[a,.5*i]},{command:"Z",values:[]}]}]}function jt(e,t){let a=t?$.tallSymbolWidth:e;const n=e,l=t?4:6;a<=$.size?a-=.5*l:a-=l;const o=.5*a,s=.15*a,i=0,r=n-s;return[{type:"ellipse",cx:.5*a,cy:r,rx:o,ry:s},{type:"path",path:[{command:"M",values:[i,s]},{command:"L",values:[i,r]},{command:"L",values:[a,r]},{command:"L",values:[a,s]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*a,cy:s,rx:o,ry:s}]}function Ot(e,t){let a=t?$.tallSymbolWidth:e;const n=e,l=t?4:6;a<=$.size?a-=.5*l:a-=l;const o=.15*a,s=n-o;return[{type:"ellipse",cx:.5*a,cy:s,rx:.5*a,ry:o},{type:"path",path:[{command:"M",values:[.5*a,0]},{command:"L",values:[a,s]},{command:"L",values:[0,s]},{command:"Z",values:[]}]}]}function Nt(e){let t=e;const a=e,n=6;t<$.size?t-=.5*n:t-=n;const l=.15*t,o=0;return[{type:"path",path:[{command:"M",values:[0,o]},{command:"L",values:[t,o]},{command:"L",values:[.5*t,a-l]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*t,cy:o,rx:.5*t,ry:l}]}function Dt(e){let t=e;const a=e,n=4;t<$.size?t-=.5*n:t-=n;const l=0,o=0,s=t,i=a,r=Math.floor(e/10)-1||1;return[{type:"path",path:[{command:"M",values:[.45*s,l]},{command:"L",values:[s,.5*i-r]},{command:"L",values:[.45*s-r,.5*i+r]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*s,l]},{command:"L",values:[.45*s-r,.5*i+r]},{command:"L",values:[o,.5*i-r]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[o,.5*i-r]},{command:"L",values:[.45*s-r,.5*i+r]},{command:"L",values:[.45*s,a]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*s,a]},{command:"L",values:[s,.5*i-r]},{command:"L",values:[.45*s-r,.5*i+r]},{command:"Z",values:[]}]}]}function Ut(e){const t=e,a=2;let n=e;n<$.size?n-=.5*a:n-=a;const l=0,o=0;return[{type:"path",path:[{command:"M",values:[.45*t,l]},{command:"L",values:[t,n]},{command:"L",values:[.45*t,.6*n]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*t,l]},{command:"L",values:[.45*t,.6*n]},{command:"L",values:[o,n]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[o,n]},{command:"L",values:[.45*t,.6*n]},{command:"L",values:[t,n]},{command:"Z",values:[]}]}]}function V(e,t){return Math.round(Math.min(Math.max(e+255*t*.75,0),255))}function ja(e,t){if(e==null)return new S;if("type"in e&&(e.type==="linear"||e.type==="pattern"))return e;const a=new S(e);return new S([V(a.r,t),V(a.g,t),V(a.b,t),a.a])}const Pt="http://www.w3.org/2000/svg";let Tt=0,Bt=0;const ie=J("android"),Ft=J("chrome")||ie&&ie>=4?"auto":"optimizeLegibility",Gt={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},Wt=/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g;let M={},b={};const qt=Math.PI;let Qt=1;function O(e,t){const a=e*(qt/180);return Math.abs(t*Math.sin(a))+Math.abs(t*Math.cos(a))}function ke(e){return e.map(t=>`${t.command} ${t.values.join(" ")}`).join(" ").trim()}function Me(e,t,a,n,l){if(e){if(e.type==="circle")return A("circle",{cx:e.cx,cy:e.cy,fill:t,"fill-rule":"evenodd",r:e.r,stroke:a.color,"stroke-dasharray":a.dashArray,"stroke-dashoffset":a.dashOffset,"stroke-linecap":a.cap,"stroke-linejoin":a.join,"stroke-miterlimit":"4","stroke-width":a.width});if(e.type==="ellipse")return A("ellipse",{cx:e.cx,cy:e.cy,fill:t,"fill-rule":"evenodd",rx:e.rx,ry:e.ry,stroke:a.color,"stroke-dasharray":a.dashArray,"stroke-linecap":a.cap,"stroke-linejoin":a.join,"stroke-miterlimit":"4","stroke-width":a.width});if(e.type==="rect")return A("rect",{fill:t,"fill-rule":"evenodd",height:e.height,stroke:a.color,"stroke-dasharray":a.dashArray,"stroke-linecap":a.cap,"stroke-linejoin":a.join,"stroke-miterlimit":"4","stroke-width":a.width,width:e.width,x:e.x,y:e.y});if(e.type==="image")return A("image",{alt:l||"image",height:e.height,href:e.src,preserveAspectRatio:"none",width:e.width,x:e.x,y:e.y});if(e.type==="path"){const o=typeof e.path!="string"?ke(e.path):e.path;return A("path",{d:o,fill:t,"fill-rule":"evenodd",stroke:a.color,"stroke-dasharray":a.dashArray,"stroke-linecap":a.cap,"stroke-linejoin":a.join,"stroke-miterlimit":"4","stroke-width":a.width})}if(e.type==="text")return ee(n),A("text",{"dominant-baseline":n.dominantBaseline,fill:t,"fill-rule":"evenodd","font-family":n.font.family,"font-size":n.font.size,"font-style":n.font.style,"font-variant":n.font.variant,"font-weight":n.font.weight,kerning:n.kerning,rotate:n.rotate,stroke:a.color,"stroke-dasharray":a.dashArray,"stroke-linecap":a.cap,"stroke-linejoin":a.join,"stroke-miterlimit":"4","stroke-width":a.width,"text-anchor":n.align,"text-decoration":n.decoration,"text-rendering":Ft,x:e.x,y:e.y},e.text)}return null}function $e(e){const t={fill:"none",pattern:null,linearGradient:null};if(e){if("type"in e&&e.type==="pattern"){const a="patternId-"+ ++Tt;t.fill=`url(#${a})`,t.pattern={id:a,x:e.x,y:e.y,width:e.width,height:e.height,image:{x:0,y:0,width:e.width,height:e.height,href:e.src}}}else if("type"in e&&e.type==="linear"){const a="linearGradientId-"+ ++Bt;t.fill=`url(#${a})`,t.linearGradient={id:a,x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,stops:e.colors.map(n=>({offset:n.offset,color:n.color&&new S(n.color).toString()}))}}else if(e){const a=new S(e);t.fill=a.toString()}}return t}function Se(e){const t={color:"none",width:1,cap:"butt",join:"4",dashArray:"none",dashOffset:"0"};return e&&(e.width!=null&&(t.width=e.width),e.cap&&(t.cap=e.cap),e.join&&(t.join=e.join.toString()),e.color&&(t.color=new S(e.color).toString()),e.dashArray&&(t.dashArray=e.dashArray),e.dashoffset&&(t.dashOffset=e.dashoffset),e.style&&!e.dashArray&&(t.dashArray=tt(e).join(",")||"none")),t}function Ce(e,t){const a={align:null,decoration:null,kerning:null,rotate:null,font:{style:null,variant:null,weight:null,size:null,family:null}};if(e){const n=e.alignBaseline,l=n==="baseline"?"auto":n==="top"?"text-top":n==="bottom"?"hanging":n;a.align=e.align,a.dominantBaseline=l,a.decoration=e.decoration,a.kerning=e.kerning?"auto":"0",a.rotate=e.rotated?"90":"0",ee(t),a.font.style=t.style||"normal",a.font.variant=t.variant||"normal",a.font.weight=t.weight||"normal",a.font.size=t.size&&t.size.toString()||"10pt",a.font.family=t.family||"serif"}return a}function Ht(e){const{pattern:t,linearGradient:a}=e;if(t)return A("pattern",{height:t.height,id:t.id,patternUnits:"userSpaceOnUse",width:t.width,x:t.x,y:t.y},A("image",{height:t.image.height,href:t.image.href,width:t.image.width,x:t.image.x,y:t.image.y}));if(a){const n=a.stops.map((l,o)=>A("stop",{key:`${o}-stop`,offset:l.offset,"stop-color":l.color}));return A("linearGradient",{gradientUnits:"userSpaceOnUse",id:a.id,x1:a.x1,x2:a.x2,y1:a.y1,y2:a.y2},n)}return null}function Kt(e,t){if(!e||e.length===0)return null;const a=[];for(const n of e){const{shape:l,fill:o,stroke:s,font:i}=n,r=$e(o),c=Se(s),m=l.type==="text"?Ce(l,i):null,f=Me(l,r.fill,c,m);f&&a.push(f)}return A("mask",{id:t,maskUnits:"userSpaceOnUse"},A("g",null,a))}function re(e,t,a){return Ge(e,te(e),[t,a])}function ce(e,t,a,n,l){return We(e,te(e),[t,a]),e[4]=e[4]*t-n*t+n,e[5]=e[5]*a-l*a+l,e}function Xt(e,t,a,n){const l=t%360*Math.PI/180;qe(e,te(e),l);const o=Math.cos(l),s=Math.sin(l),i=e[4],r=e[5];return e[4]=i*o-r*s+n*s-a*o+a,e[5]=r*o+i*s-a*s-n*o+n,e}function C(e,t){M&&"left"in M?(M.left!=null&&M.left>e&&(M.left=e),(M.right==null||M.right<e)&&(M.right=e),(M.top==null||M.top>t)&&(M.top=t),(M.bottom==null||M.bottom<t)&&(M.bottom=t)):M={left:e,bottom:t,right:e,top:t}}function ue(e){const t=e.args,a=t.length;let n;switch(e.action){case"M":case"L":case"C":case"S":case"Q":case"T":for(n=0;n<a;n+=2)C(t[n],t[n+1]);b.x=t[a-2],b.y=t[a-1];break;case"H":for(n=0;n<a;++n)C(t[n],b.y);b.x=t[a-1];break;case"V":for(n=0;n<a;++n)C(b.x,t[n]);b.y=t[a-1];break;case"m":{let l=0;for(("x"in b)||(C(b.x=t[0],b.y=t[1]),l=2),n=l;n<a;n+=2)C(b.x+=t[n],b.y+=t[n+1]);break}case"l":case"t":for(n=0;n<a;n+=2)C(b.x+=t[n],b.y+=t[n+1]);break;case"h":for(n=0;n<a;++n)C(b.x+=t[n],b.y);break;case"v":for(n=0;n<a;++n)C(b.x,b.y+=t[n]);break;case"c":for(n=0;n<a;n+=6)C(b.x+t[n],b.y+t[n+1]),C(b.x+t[n+2],b.y+t[n+3]),C(b.x+=t[n+4],b.y+=t[n+5]);break;case"s":case"q":for(n=0;n<a;n+=4)C(b.x+t[n],b.y+t[n+1]),C(b.x+=t[n+2],b.y+=t[n+3]);break;case"A":for(n=0;n<a;n+=7)C(t[n+5],t[n+6]);b.x=t[a-2],b.y=t[a-1];break;case"a":for(n=0;n<a;n+=7)C(b.x+=t[n+5],b.y+=t[n+6])}}function he(e,t,a){const n=Gt[e.toLowerCase()];let l;typeof n=="number"&&(n?t.length>=n&&(l={action:e,args:t.slice(0,t.length-t.length%n)},a.push(l),ue(l)):(l={action:e,args:[]},a.push(l),ue(l)))}function Yt(e){const t=(typeof e.path!="string"?ke(e.path):e.path).match(Wt),a=[];if(M={},b={},!t)return null;let n="",l=[];const o=t.length;for(let i=0;i<o;++i){const r=t[i],c=parseFloat(r);isNaN(c)?(n&&he(n,l,a),l=[],n=r):l.push(c)}he(n,l,a);const s={x:0,y:0,width:0,height:0};return M&&"left"in M&&(s.x=M.left,s.y=M.top,s.width=M.right-M.left,s.height=M.bottom-M.top),s}function Jt(e){const t={x:0,y:0,width:0,height:0};if(e.type==="circle")t.x=e.cx-e.r,t.y=e.cy-e.r,t.width=2*e.r,t.height=2*e.r;else if(e.type==="ellipse")t.x=e.cx-e.rx,t.y=e.cy-e.ry,t.width=2*e.rx,t.height=2*e.ry;else if(e.type==="image"||e.type==="rect")t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height;else if(e.type==="path"){const a=Yt(e);t.x=a.x,t.y=a.y,t.width=a.width,t.height=a.height}return t}function ea(e){const t={x:0,y:0,width:0,height:0};let a=null,n=Number.NEGATIVE_INFINITY,l=Number.NEGATIVE_INFINITY;for(const o of e)a?(a.x=Math.min(a.x,o.x),a.y=Math.min(a.y,o.y),n=Math.max(n,o.x+o.width),l=Math.max(l,o.y+o.height)):(a=t,a.x=o.x,a.y=o.y,n=o.x+o.width,l=o.y+o.height);return a&&(a.width=n-a.x,a.height=l-a.y),a}function ta(e,t,a,n,l,o,s,i,r){let c=(s&&o?O(o,t):t)/2,m=(s&&o?O(o,a):a)/2;if(r){const y=r[0],L=r[1];c=(s&&o?O(o,y):y)/2,m=(s&&o?O(o,L):L)/2}const f=e.width+n,p=e.height+n,h=se(),u=se();let d=!1;if(l&&f!==0&&p!==0){const y=t!==a?t/a:f/p,L=t>a?t:a;let g=1,k=1;isNaN(L)||(y>1?(g=L/f,k=L/y/p):(k=L/p,g=L*y/f)),D(u,u,ce(h,g,k,c,m)),d=!0}const v=e.x+(f-n)/2,w=e.y+(p-n)/2;if(D(u,u,re(h,c-v,m-w)),!d&&(f>t||p>a)){const y=f/t>p/a,L=(y?t:a)/(y?f:p);D(u,u,ce(h,L,L,v,w))}return o&&D(u,u,Xt(h,o,v,w)),i&&D(u,u,re(h,i[0],i[1])),`matrix(${u[0]},${u[1]},${u[2]},${u[3]},${u[4]},${u[5]})`}function aa(e,t,a){const n=e==null?void 0:e.effects.find(c=>c.type==="bloom");if(!n)return null;const{strength:l,radius:o}=n,s=l>0?o:0,i=(l+s)*t,r=4*l+1;return A("filter",{filterUnits:"userSpaceOnUse",height:"300%",id:`bloom${a}`,width:"300%",x:"-100%",y:"-100%"},A("feMorphology",{in:"SourceGraphic",operator:"dilate",radius:(l+.5*s)*(5**(t/100)*(.4+t/100)),result:"dilate"}),A("feGaussianBlur",{in:"dilate",result:"blur",stdDeviation:i/25}),A("feGaussianBlur",{in:"blur",result:"intensityBlur",stdDeviation:i/50}),A("feComponentTransfer",{in:"SourceGraphic",result:"intensityBrightness"},A("feFuncR",{slope:r,type:"linear"}),A("feFuncG",{slope:r,type:"linear"}),A("feFuncB",{slope:r,type:"linear"})),A("feMerge",null,A("feMergeNode",{in:"intensityBlur"}),A("feMergeNode",{in:"intensityBrightness"}),A("feGaussianBlur",{stdDeviation:l/10})))}function na(e,t,a,n={}){var m;const l=[],o=[],s=++Qt,i=aa(n.effectView,t,s);let r=null;if(i){const f=(m=n.effectView)==null?void 0:m.effects.find(d=>d.type==="bloom"),p=(f.strength?f.strength+f.radius/2:0)/3,h=t+t*p,u=a+a*p;r=[Math.max(h,10),Math.max(u,10)]}for(let f=0;f<e.length;f++){const p=e[f],h=[],u=[];let d=0,v=0,w=0;for(const g of p){const{shape:k,fill:I,stroke:P,font:Ie,offset:q}=g;n.ignoreStrokeWidth||k.type==="text"||(d+=(P==null?void 0:P.width)||0);const oe=$e(I),Ee=Se(P),Ve=k.type==="text"?Ce(k,Ie):null;l.push(Ht(oe)),h.push(Me(k,oe.fill,Ee,Ve,n.ariaLabel)),u.push(Jt(k)),q&&(v+=q[0],w+=q[1])}const y=ta(ea(u),t,a,d,n.scale??!1,n.rotation,n.useRotationSize??!1,[v,w],r);let L=null;if(n.masking){const g=`mask-${f}`,k=n.masking[f];l.push(Kt(k,g)),L=`url(#${g})`}o.push(L?A("g",{mask:L},A("g",{transform:y},h)):A("g",{transform:y},h))}return n.useRotationSize&&n.rotation&&(t=O(n.rotation,t),a=O(n.rotation,a)),i&&(ee(r),t=r[0],a=r[1]),A("svg",{"aria-labelledby":n.ariaLabel,focusable:!1,height:a,role:"img",style:"display: block;",width:t,xmlns:Pt},i,A("defs",null,l),i?A("g",{filter:`url(#bloom${s})`},o):o)}const pe=Qe();function la(e,t){pe.append(e,t),pe.detach(t)}function G(e,t,a){const n=Math.ceil(t[0]),l=Math.ceil(t[1]);if(!e.some(s=>!!s.length))return null;const o=(a==null?void 0:a.node)||document.createElement("div");return a.opacity!=null&&(o.style.opacity=a.opacity.toString()),a.effectView!=null&&(o.style.filter=ve(a.effectView)),la(o,()=>na(e,n,l,a)),o}function oa(e,t){e=Math.ceil(e),t=Math.ceil(t);const a=document.createElement("canvas");a.width=e,a.height=t,a.style.width=e+"px",a.style.height=t+"px";const n=a.getContext("2d");return n.clearRect(0,0,e,t),n}function sa(e,t,a){return e?Ke(e,{responseType:"image"}).then(n=>{const l=n.data,o=l.width,s=l.height,i=o/s;let r=t;if(a){const c=Math.max(o,s);r=Math.min(r,c)}return{image:l,width:i<=1?Math.ceil(r*i):r,height:i<=1?r:Math.ceil(r/i)}}):Promise.reject(new K("renderUtils: imageDataSize","href not provided."))}function ia(e,t){return!(!e||t==="ignore")&&(t!=="multiply"||e.r!==255||e.g!==255||e.b!==255||e.a!==1)}function ra(e,t,a,n,l){switch(l){case"multiply":e[t]*=a[0],e[t+1]*=a[1],e[t+2]*=a[2],e[t+3]*=a[3];break;default:{const o=ae({r:e[t],g:e[t+1],b:e[t+2]});o.h=n.h,o.s=n.s,o.v=o.v/100*n.v;const s=ge(o);e[t]=s.r,e[t+1]=s.g,e[t+2]=s.b,e[t+3]*=a[3];break}}}function ca(e,t,a,n,l){return sa(e,t,l).then(o=>{var r;const s=o.width??t,i=o.height??t;if(o.image&&ia(a,n)){let c=o.image.width,m=o.image.height;J("edge")&&/\.svg$/i.test(e)&&(c-=1,m-=1);const f=oa(s,i);f.drawImage(o.image,0,0,c,m,0,0,s,i);const p=f.getImageData(0,0,s,i),h=[a.r/255,a.g/255,a.b/255,a.a],u=ae(a);for(let d=0;d<p.data.length;d+=4)ra(p.data,d,h,u,n);f.putImageData(p,0,0),e=f.canvas.toDataURL("image/png")}else{const c=(r=He)==null?void 0:r.findCredential(e);if(c!=null&&c.token){const m=e.includes("?")?"&":"?";e=`${e}${m}token=${c.token}`}}return{url:e,width:s,height:i}}).catch(()=>({url:e,width:t,height:t}))}const R=$.size,B=$.maxSize,ne=$.maxOutlineSize,me=$.lineWidth,X=$.tallSymbolWidth;function N(e){const t=e.outline,a=e.material!=null?e.material.color:null,n=a!=null?a.toHex():null;if(t==null||"pattern"in t&&t.pattern!=null&&t.pattern.type==="style"&&t.pattern.style==="none")return e.type==="fill"&&n==="#ffffff"?{color:"#bdc3c7",width:.75}:null;const l=Z(t.size)||0;return{color:"rgba("+(t.color!=null?t.color.toRgba():"255,255,255,1")+")",width:Math.min(l,ne),style:"pattern"in t&&t.pattern!=null&&t.pattern.type==="style"?we(t.pattern.style):null,join:"butt",cap:"patternCap"in t?t.patternCap:"butt"}}async function ua(e,t){var n,l,o;if((n=e.thumbnail)!=null&&n.url)return e.thumbnail.url;if(t.type==="icon"&&((l=t==null?void 0:t.resource)==null?void 0:l.href))return ot(t);const a=Le("esri/images/Legend/legend3dsymboldefault.png");if(e.styleOrigin&&(e.styleOrigin.styleName||e.styleOrigin.styleUrl)){const s=await pt(e.styleOrigin,{portal:e.styleOrigin.portal},"webRef").catch(()=>null);if(s&&"thumbnail"in s&&((o=s.thumbnail)!=null&&o.url))return s.thumbnail.url}return a}function H(e,t=1){const a=e.a,n=ae(e),l=n.h,o=n.s/t,s=100-(100-n.v)/t,{r:i,g:r,b:c}=ge({h:l,s:o,v:s});return[i,r,c,a]}function F(e){var t;return e.type==="water"?e.color==null?null:e.color:((t=e.material)==null?void 0:t.color)==null?null:e.material.color}function x(e,t=0){const a=F(e);if(!a){if(e.type==="fill")return null;const l=at.r,o=V(l,t);return[o,o,o,100]}const n=a.toRgba();for(let l=0;l<3;l++)n[l]=V(n[l],t);return n}async function ze(e,t){const a=e.style;return a==="none"?null:{type:"pattern",x:0,y:0,src:await nt(Le(`esri/symbols/patterns/${a}.png`),t.toCss(!0)),width:5,height:5}}function fe(e){return e.outline?N(e):{color:"rgba(0, 0, 0, 1)",width:1.5}}function le(e,t){const a=F(e);if(!a)return null;let n="rgba(";return n+=V(a.r,t)+",",n+=V(a.g,t)+",",n+=V(a.b,t)+",",n+a.a+");"}function Y(e,t){const a=le(e,t);return a?"pattern"in e&&e.pattern!=null&&e.pattern.type==="style"&&e.pattern.style==="none"?null:{color:a,width:Math.min(e.size?Z(e.size):.75,ne),style:"pattern"in e&&e.pattern!=null&&e.pattern.type==="style"?we(e.pattern.style):null,cap:"cap"in e?e.cap:null,join:"join"in e?e.join==="miter"?Z(2):e.join:null}:{}}function T(e,t,a){const n=a!=null?.75*a:0;return{type:"linear",x1:n?.25*n:0,y1:n?.5*n:0,x2:n||4,y2:n?.5*n:4,colors:[{color:e,offset:0},{color:t,offset:1}]}}function ha(e){const t=e.depth,a=e.height,n=e.width;return n!==0&&t!==0&&a!==0&&n===t&&n!=null&&a!=null&&n<a}function pa(e,t,a){const n=[];if(!e)return n;switch(e.type){case"icon":{const s=t,i=t;switch(e.resource&&e.resource.primitive||Je){case"circle":n.push({shape:{type:"circle",cx:0,cy:0,r:.5*t},fill:x(e,0),stroke:N(e)});break;case"square":n.push({shape:{type:"path",path:[{command:"M",values:[0,i]},{command:"L",values:[0,0]},{command:"L",values:[s,0]},{command:"L",values:[s,i]},{command:"Z",values:[]}]},fill:x(e,0),stroke:N(e)});break;case"triangle":n.push({shape:{type:"path",path:[{command:"M",values:[0,i]},{command:"L",values:[.5*s,0]},{command:"L",values:[s,i]},{command:"Z",values:[]}]},fill:x(e,0),stroke:N(e)});break;case"cross":n.push({shape:{type:"path",path:[{command:"M",values:[.5*s,0]},{command:"L",values:[.5*s,i]},{command:"M",values:[0,.5*i]},{command:"L",values:[s,.5*i]}]},stroke:fe(e)});break;case"x":n.push({shape:{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[s,i]},{command:"M",values:[s,0]},{command:"L",values:[0,i]}]},stroke:fe(e)});break;case"kite":n.push({shape:{type:"path",path:[{command:"M",values:[0,.5*i]},{command:"L",values:[.5*s,0]},{command:"L",values:[s,.5*i]},{command:"L",values:[.5*s,i]},{command:"Z",values:[]}]},fill:x(e,0),stroke:N(e)})}break}case"object":switch(e.resource&&e.resource.primitive||Ye){case"cone":{const l=T(x(e,0),x(e,-.6),a?X:t),o=Ot(t,a);n.push({shape:o[0],fill:l},{shape:o[1],fill:l});break}case"inverted-cone":{const l=x(e,0),o=T(l,x(e,-.6),t),s=Nt(t);n.push({shape:s[0],fill:o},{shape:s[1],fill:l});break}case"cube":{const l=_t(t,a);n.push({shape:l[0],fill:x(e,0)},{shape:l[1],fill:x(e,-.3)},{shape:l[2],fill:x(e,-.5)});break}case"cylinder":{const l=T(x(e,0),x(e,-.6),a?X:t),o=jt(t,a);n.push({shape:o[0],fill:l},{shape:o[1],fill:l},{shape:o[2],fill:x(e,0)});break}case"diamond":{const l=Dt(t);n.push({shape:l[0],fill:x(e,-.3)},{shape:l[1],fill:x(e,0)},{shape:l[2],fill:x(e,-.3)},{shape:l[3],fill:x(e,-.7)});break}case"sphere":{const l=T(x(e,0),x(e,-.6));l.x1=0,l.y1=0,l.x2=.25*t,l.y2=.25*t,n.push({shape:{type:"circle",cx:0,cy:0,r:.5*t},fill:l});break}case"tetrahedron":{const l=Ut(t);n.push({shape:l[0],fill:x(e,-.3)},{shape:l[1],fill:x(e,0)},{shape:l[2],fill:x(e,-.6)});break}}break}return n}function W(e){const t=typeof(e==null?void 0:e.size)=="number"?e==null?void 0:e.size:null;return t?Z(t):null}function ma(e){return e.type==="icon"?"multiply":"tint"}async function fa(e,t){const a=W(t),n=t!=null&&t.maxSize?Z(t.maxSize):null,l=(t==null?void 0:t.disableUpsampling)??!1,o=e.symbolLayers,s=[];let i=0,r=0;const c=o.at(-1);let m;c&&c.type==="icon"&&(m=c.size&&Z(c.size)),o.forEach(h=>{var v,w;if(h.type!=="icon"&&h.type!=="object")return;const u=h.type==="icon"?h.size&&Z(h.size):0,d=a||u?Math.ceil(Math.min(a||u,n||B)):R;if((v=h==null?void 0:h.resource)!=null&&v.href){const y=ua(e,h).then(L=>{var I;const g=(I=h==null?void 0:h.material)==null?void 0:I.color,k=ma(h);return ca(L,d,g,k,l)}).then(L=>{const g=L.width,k=L.height;return i=Math.max(i,g),r=Math.max(r,k),[{shape:{type:"image",x:0,y:0,width:g,height:k,src:L.url},fill:null,stroke:null}]});s.push(y)}else{let y=d;h.type==="icon"&&m&&a&&(y=d*(u/m));const L=(t==null?void 0:t.symbolConfig)==="tall"||((w=t==null?void 0:t.symbolConfig)==null?void 0:w.isTall)||h.type==="object"&&ha(h);i=Math.max(i,L?X:y),r=Math.max(r,y),s.push(Promise.resolve(pa(h,y,L)))}});const f=await Promise.allSettled(s),p=[];return f.forEach(h=>{h.status==="fulfilled"?p.push(h.value):h.reason&&Xe.getLogger("esri.symbols.support.previewSymbol3D").warn("error while building swatchInfo!",h.reason)}),G(p,[i,r],{node:t==null?void 0:t.node,scale:!1,opacity:t==null?void 0:t.opacity,ariaLabel:t==null?void 0:t.ariaLabel})}function da(e,t){const a=e.symbolLayers,n=[],l=lt(e),o=W(t),s=(t!=null&&t.maxSize?Z(t.maxSize):null)||ne;let i,r=0,c=0;return a.forEach((m,f)=>{if(!m||m.type!=="line"&&m.type!=="path")return;const p=[];switch(m.type){case"line":{const h=Y(m,0);if(h==null)break;const u=(h==null?void 0:h.width)||0;f===0&&(i=u);const d=Math.min(o||u,s),v=f===0?d:o?d*(u/i):d,w=v>me/2?2*v:me;c=Math.max(c,v),r=Math.max(r,w),h.width=v,p.push({shape:{type:"path",path:[{command:"M",values:[0,.5*c]},{command:"L",values:[r,.5*c]}]},stroke:h});break}case"path":{const h=Math.min(o||R,s),u=x(m,0),d=x(m,-.2),v=le(m,-.4),w=v?{color:v,width:1}:{};if(m.profile==="quad"){const y=m.width,L=m.height,g=Et(y&&L?y/L:1,L===0,y===0),k={...w,join:"bevel"};p.push({shape:g[0],fill:d,stroke:k},{shape:g[1],fill:d,stroke:k},{shape:g[2],fill:u,stroke:k})}else p.push({shape:U.pathSymbol3DLayer[0],fill:d,stroke:w},{shape:U.pathSymbol3DLayer[1],fill:u,stroke:w});c=Math.max(c,h),r=c}}n.push(p)}),Promise.resolve(G(n,[r,c],{node:t==null?void 0:t.node,scale:l,opacity:t==null?void 0:t.opacity,ariaLabel:t==null?void 0:t.ariaLabel}))}async function ya(e,t){const a=e.type==="mesh-3d",n=e.symbolLayers,l=W(t),o=t!=null&&t.maxSize?Z(t.maxSize):null,s=l||R,i=[];let r=0,c=0,m=!1;for(let f=0;f<n.length;f++){const p=n.at(f),h=[];if(!a||p.type==="fill"){switch(p.type){case"fill":{const u=Math.min(s,o||B);if(r=Math.max(r,u),c=Math.max(c,u),m=!0,a){const d=U.meshSymbol3DFill,v=le(p,-.4),w=v?{color:v,width:1,join:"round"}:{};h.push({shape:d[0],fill:x(p,0),stroke:w},{shape:d[1],fill:x(p,-.2),stroke:w},{shape:d[2],fill:x(p,-.6),stroke:w})}else{let d=x(p,0);const v="pattern"in p?p.pattern:null,w=N(p),y=F(p);v!=null&&v.type==="style"&&v.style!=="solid"&&y&&(d=await ze(v,y)),h.push({shape:U.fill[0],fill:d,stroke:w})}break}case"line":{const u=Y(p,0);if(u==null)break;const d={stroke:u,shape:U.fill[0]};r=Math.max(r,R),c=Math.max(c,R),h.push(d);break}case"extrude":{const u={join:"round",width:1,...Y(p,-.4)},d=x(p,0),v=x(p,-.2),w=Math.min(s,o||B),y=Vt(w);u.width=1,h.push({shape:y[0],fill:v,stroke:u},{shape:y[1],fill:v,stroke:u},{shape:y[2],fill:d,stroke:u});const L=R,g=.7*R+.5*w;r=Math.max(r,L),c=Math.max(c,g);break}case"water":{const u=F(p),d=H(u),v=H(u,2),w=H(u,3),y=Rt();m=!0,h.push({shape:y[0],fill:d},{shape:y[1],fill:v},{shape:y[2],fill:w});const L=Math.min(s,o||B);r=Math.max(r,L),c=Math.max(c,L);break}}i.push(h)}}return G(i,[r,c],{node:t==null?void 0:t.node,scale:m,opacity:t==null?void 0:t.opacity,ariaLabel:t==null?void 0:t.ariaLabel})}function ga(e,t){if(e.symbolLayers.length===0)return Promise.reject(new K("symbolPreview: renderPreviewHTML3D","No symbolLayers in the symbol."));switch(e.type){case"point-3d":return fa(e,t);case"line-3d":return da(e,t);case"polygon-3d":case"mesh-3d":return ya(e,t)}return Promise.reject(new K("symbolPreview: swatchInfo3D","symbol not supported."))}const La=Object.freeze(Object.defineProperty({__proto__:null,getPatternDescriptor:ze,getSizeFromOptions:W,getSymbolLayerFill:x,previewSymbol3D:ga},Symbol.toStringTag,{value:"Module"}));let j=null;const de=[255,255,255];function ye(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function Oa(e,t,a){const{backgroundColor:n,outline:l,dotSize:o}=e,s=(a==null?void 0:a.swatchSize)||$.size,i=.8,r=Math.round(s*s/Math.max(o,.5)**2*i),c=window.devicePixelRatio,m=document.createElement("canvas"),f=s*c;m.width=f,m.height=f,m.style.width=m.width/c+"px",m.style.height=m.height/c+"px";const p=m.getContext("2d");if(n&&(p.fillStyle=n.toCss(!0),p.fillRect(0,0,f,f),p.fill()),p.fillStyle=(t==null?void 0:t.toCss(!0))??"",j&&j.length/2===r)for(let u=0;u<2*r;u+=2){const d=j[u],v=j[u+1];p.fillRect(d,v,o*c,o*c),p.fill()}else{j=[];for(let u=0;u<2*r;u+=2){const d=ye(0,f),v=ye(0,f);j.push(d,v),p.fillRect(d,v,o*c,o*c),p.fill()}}l&&(l.color&&(p.strokeStyle=l.color.toCss(!0)),p.lineWidth=l.width,p.strokeRect(0,0,f,f));const h=new Image(s,s);return h.src=m.toDataURL(),h.ariaLabel=(a==null?void 0:a.ariaLabel)??null,h.alt=(a==null?void 0:a.ariaLabel)??"",h}function Na(e,t={}){const a=t.radius||40,n=2*Math.PI*a,l=e.length,o=n/l,s=[],i=st(t.outline);(i==null?void 0:i.width)!=null&&(i.width*=2),(i||t.backgroundColor)&&s.push({shape:{type:"circle",cx:a,cy:a,r:a},fill:t.backgroundColor,stroke:i,offset:[0,0]});const r=t.values,c=r&&r.length===l&&r.reduce((u,d)=>u+d,0)===100,m=[0];for(let u=0;u<l;u++){let d=null;c&&(d=r[u]*n/100,m.push(d+m[u])),s.push({shape:{type:"circle",cx:a,cy:a,r:a/2},fill:[0,0,0,0],stroke:{width:a,dashArray:`${(d??o)/2} ${n}`,dashoffset:"-"+(c?m[u]/2:u*(o/2)),color:e[u]},offset:[0,0]})}let f=null;const p=2*a+((i==null?void 0:i.width)||0),h=t.holePercentage;if(h){i&&s.push({shape:{type:"circle",cx:a,cy:a,r:a*h},fill:null,stroke:i,offset:[0,0]});const u=p/2;f=[[{shape:{type:"circle",cx:u,cy:u,r:u},fill:de,stroke:i?{...i,color:de}:null,offset:[0,0]},{shape:{type:"circle",cx:u,cy:u,r:a*h},fill:[0,0,0],stroke:null,offset:[0,0]}]]}return G([s],[p,p],{effectView:t.effectList,ignoreStrokeWidth:!0,masking:f,rotation:-90,ariaLabel:t.ariaLabel})}function Da(e,t={}){const l=t.align==="horizontal",o=l?75:24,s=l?24:75,i=t.width??o,r=t.height??s,c=t.gradient??!0,m=window.devicePixelRatio,f=i*m,p=r*m,h=document.createElement("canvas");h.width=f,h.height=p,h.ariaLabel=t.ariaLabel??null,h.style.width=`${i}px`,h.style.height=`${r}px`;const u=h.getContext("2d"),d=l?f:0,v=l?0:p;if(c){const y=u.createLinearGradient(0,0,d,v),L=e.length,g=L===1?0:1/(L-1);e.forEach((k,I)=>y.addColorStop(I*g,k.toString())),u.fillStyle=y,u.fillRect(0,0,f,p)}else{const y=l?f/e.length:f,L=l?p:p/e.length;let g=0,k=0;for(const I of e)u.fillStyle=I.toString(),u.fillRect(g,k,y,L),g=l?g+y:0,k=l?0:k+L}const w=document.createElement("div");return w.style.width=`${i}px`,w.style.height=`${r}px`,va(w,t==null?void 0:t.effectList),w.appendChild(h),w}function va(e,t){if(!t)return;e.style.filter=ve(t);const a=t.effects;if(a){for(const n of a)if((n==null?void 0:n.type)==="drop-shadow"){n.offsetX<0?e.style.marginLeft=`${Math.abs(n.offsetX)}px`:e.style.marginRight=`${n.offsetX}px`;break}}}async function wa(e,t){switch(e.type){case"web-style":{const{previewWebStyleSymbol:a}=await E(()=>import("./previewWebStyleSymbol-bLnihimz.js"),__vite__mapDeps([2,0,1,3,4,5,6]),import.meta.url);return a(e,wa,t)}case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":{const{previewSymbol3D:a}=await E(()=>Promise.resolve().then(()=>La),void 0,import.meta.url);return a(e,t)}case"simple-marker":case"simple-line":case"simple-fill":case"picture-marker":case"picture-fill":case"text":{const{previewSymbol2D:a}=await E(()=>import("./previewSymbol2D-Bi8aa2I6.js"),__vite__mapDeps([7,0,1,8,3,4,5,6]),import.meta.url);return a(e,t)}case"cim":{const{previewCIMSymbol:a}=await E(()=>import("./previewCIMSymbol-CEILLpzW.js"),__vite__mapDeps([9,0,1,10,11,8,12,13,14,15,16,17,18,19,3,4,5,6]),import.meta.url);return a(e,t)}default:return}}function Ze(e){return e&&"opacity"in e?e.opacity*Ze(e.parent):1}async function Ua(e,t){var L;if(!e)return;const a=e.sourceLayer,n=(t!=null&&t.useSourceLayer?a:e.layer)??a,l=Ze(n);if(e.symbol!=null&&(t==null||t.ignoreGraphicSymbol!==!0)){const g=e.symbol.type==="web-style"?await it(e.symbol,{...t,cache:t!=null?t.webStyleCache:null}):e.symbol.clone();return Q(g,null,l),g}const o=(t==null?void 0:t.renderer)??ba(n);let s=o&&"getSymbolAsync"in o?await o.getSymbolAsync(e,t):null;if(!s)return;if(s=s.type==="web-style"?await s.fetchSymbol({...t,cache:t!=null?t.webStyleCache:null}):s.clone(),!o||!("visualVariables"in o)||!((L=o.visualVariables)!=null&&L.length))return Q(s,null,l),s;if("arcadeRequiredForVisualVariables"in o&&o.arcadeRequiredForVisualVariables&&(t==null?void 0:t.arcade)==null){const g={...t};g.arcade=await et(),t=g}const{getColor:i,getOpacity:r,getAllSizes:c,getRotationAngle:m}=await E(()=>import("./index-HVMkvd8u.js").then(g=>g.of),__vite__mapDeps([0,1]),import.meta.url),f=[],p=[],h=[],u=[];for(const g of o.visualVariables)switch(g.type){case"color":f.push(g);break;case"opacity":p.push(g);break;case"rotation":u.push(g);break;case"size":g.target||h.push(g)}const d=!!f.length&&f[f.length-1],v=d?i(d,e,t):null,w=!!p.length&&p[p.length-1];let y=w?r(w,e,t):null;if(l!=null&&(y=y!=null?y*l:l),Q(s,v,y),h.length){const g=c(h,e,t);await rt(s,g)}for(const g of u)ct(s,m(g,e,t),g.axis);return s}function ba(e){if(e)return"renderer"in e?e.renderer:void 0}export{Ht as $,Se as A,Sa as B,na as C,_a as D,ea as E,Ua as F,ta as L,$e as M,Jt as T,wa as V,gt as a,wt as b,bt as c,ja as d,U as e,Da as f,zt as g,Va as h,xe as i,Oa as j,Na as k,G as l,It as m,Ia as n,Ra as o,Za as p,x as q,xt as r,At as s,$ as t,Ca as u,Me as v,za as w,Ea as x,St as y,$a as z};
