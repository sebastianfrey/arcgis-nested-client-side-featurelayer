import{c9 as A,hq as O,hr as T,hs as N,ep as k,ht as L,hu as _,hv as F,hw as p,hx as I,hy as R,hz as e,aa as W,hA as $,hB as f,hC as G,hD as H,cS as S}from"./index-DtvgboMu.js";const U=new A(O),i=new A(T),C=new A(N);new A(k);function x(s){const u=P.get(s);if(u)return u;let n=U;if(s)if(s===i)n=i;else if(s===C)n=C;else{const l=s.wkid,a=s.latestWkid;if(l!=null||a!=null)L(l)||L(a)?n=i:(_(l)||_(a))&&(n=C);else{const o=s.wkt2??s.wkt;if(o){const r=o.toUpperCase();r===m?n=i:r===B&&(n=C)}}}return P.set(s,n),n}const P=new Map,m=i.wkt.toUpperCase(),B=C.wkt.toUpperCase();function M(s,u,n){const l=Math.sin(s),a=Math.cos(s),o=Math.sin(u),r=Math.cos(u),t=n;return t[0]=-l,t[4]=-o*a,t[8]=r*a,t[12]=0,t[1]=a,t[5]=-o*l,t[9]=r*l,t[13]=0,t[2]=0,t[6]=r,t[10]=o,t[14]=0,t[3]=0,t[7]=0,t[11]=0,t[15]=1,t}function d(s,u,n){return M(s,u,n),F(n,n),n}function D(s,u,n,l){if(s==null||l==null)return!1;const a=p(s,I),o=p(l,R);if(a===o&&!w(o)&&(a!==e.UNKNOWN||W(s,l)))return $(n,u),!0;if(w(o)){const r=f[a][e.LON_LAT],t=f[e.LON_LAT][o];return r!=null&&t!=null&&(r(u,0,E,0),t(E,0,c,0),M(h*E[0],h*E[1],n),n[12]=c[0],n[13]=c[1],n[14]=c[2],!0)}if((o===e.WEB_MERCATOR||o===e.PLATE_CARREE||o===e.WGS84)&&(a===e.WGS84||a===e.CGCS2000&&o===e.PLATE_CARREE||a===e.SPHERICAL_ECEF||a===e.WEB_MERCATOR)){const r=f[a][e.LON_LAT],t=f[e.LON_LAT][o];return r!=null&&t!=null&&(r(u,0,E,0),t(E,0,c,0),a===e.SPHERICAL_ECEF?d(h*E[0],h*E[1],n):G(n),n[12]=c[0],n[13]=c[1],n[14]=c[2],!0)}return!1}function w(s){return s===e.SPHERICAL_ECEF||s===e.SPHERICAL_MARS_PCPF||s===e.SPHERICAL_MOON_PCPF}const h=H(1),E=S(),c=S();export{D as R,x as a};
