import{bw as A,bz as R,c9 as b,dr as w,ds as W}from"./index-HVMkvd8u.js";import{K as v}from"./featureConversionUtils-D8FbZ-gp.js";import{e as B}from"./OptimizedGeometry-DLPswkPy.js";import{j as $}from"./timeSupport-DXIzMdC0.js";const F=new Float64Array(2),T=new Float64Array(2),Y="0123456789bcdefghjkmnpqrstuvwxyz",k=64;function X(n,e,t,s){const r=[n.xmin,n.ymin,n.xmax,n.ymax],a=A.fromExtent(R.fromBounds(r,s)),c=$(a,s,b.WGS84,{densificationStep:e*k});if(!c)return null;const o=v(new B,c,!1,!1),u=o.coords.filter((g,h)=>!(h%2)),i=o.coords.filter((g,h)=>h%2),p=Math.min(...u),M=Math.min(...i),l=Math.max(...u),m=Math.max(...i),f=j(p,M,t,b.WGS84),y=j(l,m,t,b.WGS84);return f&&y?{bounds:r,geohashBounds:{xLL:f[0],yLL:f[1],xTR:y[0],yTR:y[1]},level:t}:null}function j(n,e,t,s){if(s.isWebMercator){const c=w(n/W.radius),o=c-360*Math.floor((c+180)/360),u=[0,0];return L(u,0,w(Math.PI/2-2*Math.atan(Math.exp(-e/W.radius))),o,t),u}const r=$({x:n,y:e},s,b.WGS84);if(!r)return null;const a=[0,0];return L(a,0,r.y,r.x,t),a}function q(n){return Y[n]}function z(n){return(n[0]+n[1])/2}function G(n,e,t){return n[0]=e,n[1]=t,n}function C(n,e){const t=z(n),s=e,r=!e;n[0]=r*n[0]+s*t,n[1]=r*t+s*n[1]}function x(n,e){const t=e>z(n);return C(n,t),t}function D(n,e){let t=-90,s=90,r=-180,a=180;for(let c=0;c<e;c++){const o=Math.ceil((c+1)/2),u=Math.floor((c+1)/2),i=1-c%2,p=30-(3*o+2*u),M=30-(2*o+3*u),l=3*i+2*(1-i),m=2*i+3*(1-i),f=3*i+7*(1-i)<<M,y=(7*i+3*(1-i)<<p&n.geohashX)>>p,g=(f&n.geohashY)>>M;for(let h=l-1;h>=0;h--){const S=(r+a)/2,d=y&1<<h?1:0;r=(1-d)*r+d*S,a=(1-d)*S+d*a}for(let h=m-1;h>=0;h--){const S=(t+s)/2,d=g&1<<h?1:0;t=(1-d)*t+d*S,s=(1-d)*S+d*s}}return[r,t,a,s]}function L(n,e,t,s,r){r%2&&(r+=1);let a=0,c=0,o=-90,u=90,i=-180,p=180;for(let M=0;M<r/2;M++){for(let l=0;l<5;l++){const m=(i+p)/2,f=s>m?1:0;a|=f<<29-(l+5*M),i=(1-f)*i+f*m,p=(1-f)*m+f*p}for(let l=0;l<5;l++){const m=(o+u)/2,f=t>m?1:0;c|=f<<29-(l+5*M),o=(1-f)*o+f*m,u=(1-f)*m+f*u}}n[2*e]=a,n[2*e+1]=c}function H(n,e,t){let s="";const r=G(F,-90,90),a=G(T,-180,180);for(let c=0;c<t;c++){let o=0;c%2?(o|=x(r,n)<<4,o|=x(a,e)<<3,o|=x(r,n)<<2,o|=x(a,e)<<1,o|=x(r,n)<<0):(o|=x(a,e)<<4,o|=x(r,n)<<3,o|=x(a,e)<<2,o|=x(r,n)<<1,o|=x(a,e)<<0),s+=q(o)}return s}export{j as A,D as R,X as S,H as z};
