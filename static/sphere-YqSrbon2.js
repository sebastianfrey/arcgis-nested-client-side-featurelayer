import{cO as w,hE as a,hF as C,ed as A,cS as h,ee as J,ef as g,ei as M,eh as l,hG as N,cN as T,cD as x,hH as j,ad as K,cC as V,hI as v,cP as L,hJ as X,en as Y,eg as k,hK as p,cR as B,hL as _,fP as q,hM as Q,hN as U,hO as W}from"./index-DtvgboMu.js";import{s as tt}from"./ObjectStack-gEJdxqJJ.js";import{c as f,f as nt}from"./plane-D1XR903e.js";function et(t,e){const n=w(t,e)/(a(t)*a(e));return-C(n)}function z(t){return t?E(A(t.origin),A(t.direction)):E(h(),h())}function E(t,e){return{origin:t,direction:e}}function Et(t,e){const n=it.get();return n.origin=t,n.direction=e,n}function ot(t,e,n=z()){return J(n.origin,t),g(n.direction,e,t),n}function rt(t,e,n){const o=w(t.direction,g(n,e,t.origin));return M(n,t.origin,l(n,t.direction,o)),n}const it=new tt(()=>z()),st=R();function R(){return N()}const ct=T,ut=T;function Z(t,e){return x(e,t)}function at(t,e){return j(t[0],t[1],t[2],e)}function ft(t){return t}function gt(t){t[0]=t[1]=t[2]=t[3]=0}function ht(t,e){return t[0]=t[1]=t[2]=0,t[3]=e,t}function $(t){return t[3]}function lt(t){return t}function dt(t,e,n,o){return j(t,e,n,o)}function pt(t,e,n){return t!==n&&(n[0]=t[0],n[1]=t[1],n[2]=t[2]),n[3]=t[3]+e,n}function mt(t,e,n){return K.getLogger("esri.geometry.support.sphere").error("sphere.setExtent is not yet supported"),t!==n&&Z(t,n),n}function S(t,e,n){if(e==null||!D(t,e,m))return!1;let{t0:o,t1:r}=m;if((o<0||r<o&&r>0)&&(o=r),o<0)return!1;if(n){const{origin:i,direction:s}=e;n[0]=i[0]+s[0]*o,n[1]=i[1]+s[1]*o,n[2]=i[2]+s[2]*o}return!0}function Mt(t,e,n){const o=ot(e,n);if(!D(t,o,m))return[];const{origin:r,direction:i}=o,{t0:s,t1:c}=m,u=d=>{const y=h();return W(y,r,i,d),b(t,y,y)};return Math.abs(s-c)<V()?[u(s)]:[u(s),u(c)]}const m={t0:0,t1:0};function D(t,e,n){const{origin:o,direction:r}=e,i=$t;i[0]=o[0]-t[0],i[1]=o[1]-t[1],i[2]=o[2]-t[2];const s=r[0]*r[0]+r[1]*r[1]+r[2]*r[2];if(s===0)return!1;const c=2*(r[0]*i[0]+r[1]*i[1]+r[2]*i[2]),u=c*c-4*s*(i[0]*i[0]+i[1]*i[1]+i[2]*i[2]-t[3]*t[3]);if(u<0)return!1;const d=Math.sqrt(u);return n.t0=(-c-d)/(2*s),n.t1=(-c+d)/(2*s),!0}const $t=h();function St(t,e){return S(t,e,null)}function yt(t,e,n){if(S(t,e,n))return n;const o=F(t,e,f.get());return M(n,e.origin,l(f.get(),e.direction,v(e.origin,o)/a(e.direction))),n}function F(t,e,n){const o=f.get(),r=nt.get();L(o,e.origin,e.direction);const i=$(t);L(n,o,e.origin),l(n,n,1/a(n)*i);const s=G(t,e.origin),c=et(e.origin,n);return X(r,c+s,o),Y(n,n,r),n}function Pt(t,e,n){return S(t,e,n)?n:(rt(e,t,n),b(t,n,n))}function b(t,e,n){const o=g(f.get(),e,t),r=l(f.get(),o,t[3]/a(o));return M(n,r,t)}function xt(t,e){const n=g(f.get(),e,t),o=k(n),r=t[3]*t[3];return Math.sqrt(Math.abs(o-r))}function G(t,e){const n=g(f.get(),e,t),o=a(n),r=$(t),i=r+Math.abs(r-o);return C(r/i)}const P=h();function H(t,e,n,o){const r=g(P,e,t);switch(n){case p.X:{const i=_(r,P)[2];return q(o,-Math.sin(i),Math.cos(i),0)}case p.Y:{const i=_(r,P),s=i[1],c=i[2],u=Math.sin(s);return q(o,-u*Math.cos(c),-u*Math.sin(c),Math.cos(s))}case p.Z:return B(o,r);default:return}}function I(t,e){const n=g(O,e,t);return a(n)-t[3]}function Ot(t,e,n,o){const r=I(t,e),i=H(t,e,p.Z,O),s=l(O,i,n-r);return M(o,e,s)}function Rt(t,e){const n=Q(t,e),o=$(t);return n<=o*o}function bt(t,e,n=N()){const o=v(t,e),r=t[3],i=e[3];return o+i<r?(x(n,t),n):o+r<i?(x(n,e),n):(U(n,t,e,(o+i-r)/(2*o)),n[3]=(o+r+i)/2,n)}const O=h(),At=R();Object.freeze(Object.defineProperty({__proto__:null,NullSphere:st,altitudeAt:I,angleToSilhouette:G,axisAt:H,clear:gt,closestPoint:Pt,closestPointOnSilhouette:F,containsPoint:Rt,copy:Z,create:R,distanceToSilhouette:xt,elevate:pt,equals:ut,exactEquals:ct,fromCenterAndRadius:at,fromRadius:ht,fromValues:dt,getCenter:lt,getRadius:$,intersectLine:Mt,intersectRay:S,intersectRayClosestSilhouette:yt,intersectsRay:St,projectPoint:b,setAltitudeAt:Ot,setExtent:mt,tmpSphere:At,union:bt,wrap:ft},Symbol.toStringTag,{value:"Module"}));export{St as I,Z as O,$ as V,lt as Z,z as d,Et as p,Rt as s,R as w};
